{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sheet Music Database</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    {% include 'navbar.html' %}
    <div class="container">
        <aside class="sidebar">
            <h1>Notová databáze</h1>
            <form method="get">
                <div>
                    <label for="genre">Žánr</label>
                    <select name="genre" id="genre">
                        <option value="all" {% if selected_genre == 'all' %}selected{% endif %}>Vše</option>
                        {% for code, name in genre_choices %}
                            <option value="{{ code }}" {% if selected_genre == code %}selected{% endif %}>{{ name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <label for="difficulty">Obtížnost</label>
                    <select name="difficulty" id="difficulty">
                        <option value="all" {% if selected_difficulty == 'all' %}selected{% endif %}>Vše</option>
                        {% for code, name in difficulty_choices %}
                            <option value="{{ code }}" {% if selected_difficulty == code %}selected{% endif %}>{{ name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <label for="year">Rok vydání</label>
                    <select name="year" id="year">
                        <option value="all" {% if selected_year == 'all' %}selected{% endif %}>Vše</option>
                        {% for y in years %}
                            <option value="{{ y }}" {% if selected_year == y|stringformat:"s" %}selected{% endif %}>{{ y }}</option>
                        {% endfor %}
                    </select>
                </div>
                <button type="submit">Filtrovat</button>
            </form>
        </aside>
        <main class="main-content">
            <div class="sheet-music-list">
                <a href="{% url 'add_sheet' %}">Přidat noty</a>
                <!-- Example items -->
                {% for sheet in sheets %}
                <div class="sheet-music-item">
                    <h2>{{ sheet.title }} od {{ sheet.composer }}</h2>
                    <div class="sheet-preview-container">
                        {% if sheet.preview_image %}
                            <img src="{{ sheet.preview_image.url }}">
                        {% else %}
                            <img src="{% static 'images/placeholder.jpg' %}" alt="Žádný náhled">
                        {% endif %}
                    </div>
                    </div>
                    <div class="sheet-options">
                        <a href="{% url 'sheet_profile' sheet.pk %}">Více</a>
                        <a href="{{ sheet.sheet_file.url }}" download>Stáhnout</a>
                    </form>
                    </div>
                </div>
                {% endfor %}
            </div>
        </main>
    </div>
    {% include 'footer.html' %}
</body>
</html>